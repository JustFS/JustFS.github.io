(this["webpackJsonpreact-crud"]=this["webpackJsonpreact-crud"]||[]).push([[0],{19:function(e,t,a){e.exports=a(42)},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(1),u=a.n(n),r=a(15),c=a.n(r),l=a(6),o=a(16),i=a.n(o),s=a(11),m=a.n(s);m.a.initializeApp({apiKey:"AIzaSyCVPb5Wkan3Ma6shPRxV89ilDB7wrlN0yE",authDomain:"react-auth-4f668.firebaseapp.com",databaseURL:"https://react-auth-4f668.firebaseio.com",projectId:"react-auth-4f668",storageBucket:"react-auth-4f668.appspot.com",messagingSenderId:"133314651046",appId:"1:133314651046:web:353807c7bd784eb7346567",measurementId:"G-EHS1EER2GK"});var d=m.a,E=Object(n.createContext)(null),f=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(l.a)(c,2),i=o[0],s=o[1],m=Object(n.useContext)(E);return u.a.createElement("div",{className:"create"},u.a.createElement("h4",null,"D\xe9poser une citation"),u.a.createElement("div",{className:"form"},u.a.createElement("input",{type:"text",placeholder:"Auteur",value:a,onChange:function(e){return r(e.target.value)}}),u.a.createElement("textarea",{type:"text",placeholder:"Citation",value:i,onChange:function(e){return s(e.target.value)}}),u.a.createElement("button",{onClick:function(){var e=d.database().ref("quotesDB"),t={uid:m,author:a,text:i};e.push(t),r(""),s("")}},"Create")))},h=a(18),b=function(e){var t=e.item,a=Object(n.useState)(!1),r=Object(l.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(null),s=Object(l.a)(i,2),m=s[0],f=s[1],h=Object(n.useState)(null),b=Object(l.a)(h,2),p=b[0],v=b[1],O=Object(n.useContext)(E),j=function(){return t.uid===O};j();return u.a.createElement("li",null,!1===c&&u.a.createElement("div",{className:"item-container"},u.a.createElement("p",null,'"',t.text,'"'),u.a.createElement("h6",null,t.author),j()&&u.a.createElement("div",{className:"buttons-container"},u.a.createElement("button",{onClick:function(){return o(!c)}},"Update"),u.a.createElement("button",{onClick:function(){d.database().ref("quotesDB").child(t.id).remove(),j()}},"Delete"))),c&&u.a.createElement("div",{className:"item-container-update"},u.a.createElement("textarea",{defaultValue:t.text,onChange:function(e){return v(e.target.value)}}),u.a.createElement("input",{type:"text",defaultValue:t.author,onChange:function(e){return f(e.target.value)}}),u.a.createElement("button",{onClick:function(){var e=d.database().ref("quotesDB").child(t.id);null!==m&&e.update({author:m}),null!==p&&e.update({text:p}),o(!1)}},"Validate update")))},p=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){d.database().ref("quotesDB").on("value",(function(e){console.log(e.val());var t=e.val(),a=[];for(var n in t)a.push(Object(h.a)({id:n},t[n]));r(a)}))}),[]),u.a.createElement("div",{className:"read"},u.a.createElement("ul",null,a&&a.map((function(e,t){return u.a.createElement(b,{item:e,key:t})}))))},v=function(){return u.a.createElement("main",null,u.a.createElement("nav",null,u.a.createElement("h1",null,"React Crud"),u.a.createElement("h4",null,"Bonjour ",d.auth().currentUser.displayName),u.a.createElement("div",{onClick:function(){return d.auth().signOut()}},"Se d\xe9connecter")),u.a.createElement(f,null),u.a.createElement(p,null))},O=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(l.a)(c,2),s=o[0],m=o[1],f={signInFlow:"popup",signInOptions:[d.auth.GoogleAuthProvider.PROVIDER_ID,d.auth.FacebookAuthProvider.PROVIDER_ID,d.auth.TwitterAuthProvider.PROVIDER_ID,d.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}};return Object(n.useEffect)((function(){d.auth().onAuthStateChanged((function(e){r(!!e),console.log(e),m(e.uid)}))}),[]),u.a.createElement(E.Provider,{value:s},u.a.createElement("div",{className:"App"},a?u.a.createElement(v,null):u.a.createElement("div",{className:"login-page"},u.a.createElement("h1",null,"React Crud"),u.a.createElement(i.a,{uiConfig:f,firebaseAuth:d.auth()}))))};a(41);c.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(O,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.447c799a.chunk.js.map